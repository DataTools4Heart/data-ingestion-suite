{
  "id" : "ucl-mapping-job",
  "sourceSettings" : {
    "source" : {
      "jsonClass" : "SqlSourceSettings",
      "name" : "omop-source",
      "sourceUri" : "https://datatools4heart.eu/tofhir-mappings/omop-data",
      "databaseUrl" : "jdbc:postgresql://localhost:5432/ucl_omop",
      "username" : "postgres",
      "password" : "password"
    }
  },
  "sinkSettings" : {
    "jsonClass" : "FhirRepositorySinkSettings",
    "fhirRepoUrl" : "http://localhost:8081/fhir",
    "returnMinimal" : true,
    "errorHandling": "continue"
  },
  "terminologyServiceSettings" : {
    "jsonClass" : "LocalFhirTerminologyServiceSettings",
    "folderPath" : "/terminology-systems/DT4HTerminologyService",
    "conceptMapFiles" : [ {
      "id" : "icd9toicd10.csv",
      "name" : "icd9toicd10.csv",
      "conceptMapUrl" : "https://datatools4heart.eu/fhir/mappings/ConceptMap/icd9-to-icd10",
      "sourceValueSetUrl" : "http://terminology.hl7.org/CodeSystem/icd9cm",
      "targetValueSetUrl" : "http://hl7.org/fhir/sid/icd-10"
    } ],
    "codeSystemFiles" : [ ]
  },
  "mappings" : [ {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/ucl/medication-mapping",
    "sourceContext" : {
      "omopDrugExposure" : {
        "jsonClass" : "SqlSource",
        "query" : "select de.drug_exposure_id, de.person_id, de.drug_exposure_start_datetime, de.drug_exposure_end_datetime, de.quantity, de.visit_occurrence_id, c.vocabulary_id, c.concept_code, c.concept_name\nfrom drug_exposure de, concept c\nwhere de.drug_concept_id = c.concept_id and quantity is not null and visit_occurrence_id is not null"
      }
    }
  } ],
  "mappingErrorHandling" : "continue",
  "useFhirSinkAsIdentityService" : false
}
