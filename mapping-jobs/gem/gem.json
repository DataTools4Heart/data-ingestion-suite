{
  "id" : "gem",
  "name" : "gem",
  "sourceSettings" : {
    "gem-source" : {
      "jsonClass" : "FileSystemSourceSettings",
      "name" : "gem-source",
      "sourceUri" : "https://datatools4heart.eu/data-ingestion-suite/gem-data",
      "dataFolderPath" : "test-data/gem",
      "asStream" : false
    }
  },
  "sinkSettings" : {
    "jsonClass" : "FhirRepositorySinkSettings",
    "fhirRepoUrl" : "http://localhost:8080/fhir",
    "returnMinimal" : true
  },
  "mappings" : [ {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/cause-of-death-mapping",
    "sourceContext" : {
      "anagrafica" : {
        "jsonClass" : "FileSystemSource",
        "path" : "anagrafica.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/condition-mapping",
    "sourceContext" : {
      "source" : {
        "jsonClass" : "FileSystemSource",
        "path" : "patologie.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/echocardiograph-mapping",
    "sourceContext" : {
      "echo" : {
        "jsonClass" : "FileSystemSource",
        "path" : "ecocardio.csv",
        "fileFormat" : "csv",
        "options" : { },
        "preprocessSql" : "select echo.codice_sanitario, echo.DATAREFERTO, array_agg(CONCAT(echo.MEASURENAME, '|', echo.MEASUERVALUE)) as echodata from echo group by echo.codice_sanitario, echo.DATAREFERTO ",
        "sourceRef" : "gem-source"
      },
      "encounters" : {
        "jsonClass" : "FileSystemSource",
        "path" : "elenco_contatti.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/encounter-mapping",
    "sourceContext" : {
      "encounterMain" : {
        "jsonClass" : "FileSystemSource",
        "path" : "elenco_contatti.csv",
        "options" : { },
        "sourceRef" : "gem-source"
      },
      "encounterDetails" : {
        "jsonClass" : "FileSystemSource",
        "path" : "dettagliocontatti.csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/lab-result-and-vital-sign-mapping",
    "sourceContext" : {
      "labResults" : {
        "jsonClass" : "FileSystemSource",
        "path" : "diario_misure.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      },
      "encounters" : {
        "jsonClass" : "FileSystemSource",
        "path" : "elenco_contatti.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/medication-mapping",
    "sourceContext" : {
      "medications" : {
        "jsonClass" : "FileSystemSource",
        "path" : "farmaci.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      },
      "encounters" : {
        "jsonClass" : "FileSystemSource",
        "path" : "elenco_contatti.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/nyha-mapping",
    "sourceContext" : {
      "nyha" : {
        "jsonClass" : "FileSystemSource",
        "path" : "nyha.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      },
      "encounters" : {
        "jsonClass" : "FileSystemSource",
        "path" : "elenco_contatti.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/patient-mapping",
    "sourceContext" : {
      "source" : {
        "jsonClass" : "FileSystemSource",
        "path" : "anagrafica.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/smoking-status-mapping",
    "sourceContext" : {
      "patology" : {
        "jsonClass" : "FileSystemSource",
        "path" : "patologie.csv",
        "fileFormat" : "csv",
        "options" : { },
        "sourceRef" : "gem-source"
      }
    }
  }, {
    "mappingRef" : "https://datatools4heart.eu/fhir/mappings/gem/procedure-mapping",
    "sourceContext" : {
      "encounterDetails" : {
        "jsonClass" : "FileSystemSource",
        "path" : "dettagliocontatti.csv",
        "options" : { },
        "preprocessSql" : "select CODICE_SANITARIO, NOSOGRAFICO_ADT, DATA_RICOVERO, ORA_RICOVERO, DATA_DIMISSIONE, ORA_DIMISSIONE, DESC_REPARTO_RICOVERO, DIAG1_ICD9CM, DIAG2_ICD9CM, DIAG3_ICD9CM, DIAG4_ICD9CM, DIAG5_ICD9CM, DIAG6_ICD9CM, DIAG7_ICD9CM, ARRAY(PROC1, PROC2, PROC3, PROC4, PROC5, PROC6, PROC7) as PROC, ARRAY(DATAPROC1, DATAPROC2, DATAPROC3, DATAPROC4, DATAPROC5, DATAPROC6, DATAPROC7) as DATAPROC, TIPO from encounterDetails",
        "sourceRef" : "gem-source"
      }
    }
  } ],
  "dataProcessingSettings" : {
    "saveErroneousRecords" : false,
    "archiveMode" : "off"
  },
  "useFhirSinkAsIdentityService" : false
}